"use strict";(self.webpackChunkhome_assistant_frontend=self.webpackChunkhome_assistant_frontend||[]).push([["6201"],{78870:function(e,t,i){i.d(t,{M:function(){return o},l:function(){return a}});i(23792),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953);const a=new Set(["primary","accent","disabled","red","pink","purple","deep-purple","indigo","blue","light-blue","cyan","teal","green","light-green","lime","yellow","amber","orange","deep-orange","brown","light-grey","grey","dark-grey","blue-grey","black","white"]);function o(e){return a.has(e)?`var(--${e}-color)`:e}},13467:function(e,t,i){var a=i(62826),o=i(41216),s=i(78960),l=i(75640),r=i(91735),n=i(43826),c=i(96196),d=i(77845);let h;class p extends o.R{}p.styles=[r.R,n.R,l.R,s.R,(0,c.AH)(h||(h=(e=>e)`:host{--md-sys-color-primary:var(--primary-text-color);--md-sys-color-on-surface:var(--primary-text-color);--md-sys-color-on-surface-variant:var(--primary-text-color);--md-sys-color-on-secondary-container:var(--primary-text-color);--md-input-chip-container-shape:16px;--md-input-chip-outline-color:var(--outline-color);--md-input-chip-selected-container-color:rgba(
          var(--rgb-primary-text-color),
          0.15
        );--ha-input-chip-selected-container-opacity:1;--md-input-chip-label-text-font:Roboto,sans-serif}::slotted([slot=icon]){display:flex;--mdc-icon-size:var(--md-input-chip-icon-size, 18px)}.selected::before{opacity:var(--ha-input-chip-selected-container-opacity)}`))],p=(0,a.__decorate)([(0,d.EM)("ha-input-chip")],p)},81789:function(e,t,i){i.a(e,async function(e,t){try{i(74423),i(23792),i(18111),i(22489),i(61701),i(3362),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953);var a=i(62826),o=i(96196),s=i(77845),l=i(22786),r=i(1087),n=i(6262),c=i(65063),d=i(54706),h=i(69569),p=i(38508),u=(i(67094),e([p]));p=(u.then?(await u)():u)[0];let _,b,v,y,m,g,f=e=>e;const k="M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",$="M19,13H13V19H11V13H5V11H11V5H13V11H19V13Z",M="___ADD_NEW___",w="___NO_LABELS___";class x extends((0,d.E)(o.WF)){async open(){var e;await this.updateComplete,await(null===(e=this._picker)||void 0===e?void 0:e.open())}hassSubscribe(){return[(0,n.o5)(this.hass.connection,e=>{this._labels=e})]}render(){var e,t;const i=null!==(e=this.placeholder)&&void 0!==e?e:this.hass.localize("ui.components.label-picker.label"),a=this._computeValueRenderer(this._labels);return(0,o.qy)(_||(_=f` <ha-generic-picker .disabled="${0}" .hass="${0}" .autofocus="${0}" .label="${0}" .notFoundLabel="${0}" .emptyLabel="${0}" .addButtonLabel="${0}" .placeholder="${0}" .value="${0}" .getItems="${0}" .getAdditionalItems="${0}" .valueRenderer="${0}" @value-changed="${0}"> <slot .slot="${0}"></slot> </ha-generic-picker> `),this.disabled,this.hass,this.autofocus,this.label,this._notFoundLabel,this.hass.localize("ui.components.label-picker.no_labels"),this.hass.localize("ui.components.label-picker.add"),i,this.value,this._getItems,this._getAdditionalItems,a,this._valueChanged,null!==(t=this._slotNodes)&&void 0!==t&&t.length?"field":void 0)}_valueChanged(e){e.stopPropagation();const t=e.detail.value;if(t!==w)if(t){if(t.startsWith(M)){this.hass.loadFragmentTranslation("config");const e=t.substring(M.length);return void(0,h.f)(this,{suggestedName:e,createEntry:async e=>{try{const t=await(0,n._9)(this.hass,e);this._setValue(t.label_id)}catch(t){(0,c.K$)(this,{title:this.hass.localize("ui.components.label-picker.failed_create_label"),text:t.message})}}})}this._setValue(t)}else this._setValue(void 0)}_setValue(e){this.value=e,setTimeout(()=>{(0,r.r)(this,"value-changed",{value:e}),(0,r.r)(this,"change")},0)}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._labelMap=(0,l.A)(e=>e?new Map(e.map(e=>[e.label_id,e])):new Map),this._computeValueRenderer=(0,l.A)(e=>t=>{const i=this._labelMap(e).get(t);return i?(0,o.qy)(v||(v=f` ${0} <span slot="headline">${0}</span> `),i.icon?(0,o.qy)(y||(y=f`<ha-icon slot="start" .icon="${0}"></ha-icon>`),i.icon):(0,o.qy)(m||(m=f`<ha-svg-icon slot="start" .path="${0}"></ha-svg-icon>`),k),i.name):(0,o.qy)(b||(b=f` <ha-svg-icon slot="start" .path="${0}"></ha-svg-icon> <span slot="headline">${0}</span> `),k,t)}),this._getLabelsMemoized=(0,l.A)(n.IV),this._getItems=()=>this._labels&&0!==this._labels.length?this._getLabelsMemoized(this.hass.states,this.hass.areas,this.hass.devices,this.hass.entities,this._labels,this.includeDomains,this.excludeDomains,this.includeDeviceClasses,this.deviceFilter,this.entityFilter,this.excludeLabels):[{id:w,primary:this.hass.localize("ui.components.label-picker.no_labels"),icon_path:k}],this._allLabelNames=(0,l.A)(e=>e?[...new Set(e.map(e=>e.name.toLowerCase()).filter(Boolean))]:[]),this._getAdditionalItems=e=>{if(this.noAdd)return[];const t=this._allLabelNames(this._labels);return e&&!t.includes(e.toLowerCase())?[{id:M+e,primary:this.hass.localize("ui.components.label-picker.add_new_sugestion",{name:e}),icon_path:$}]:[{id:M,primary:this.hass.localize("ui.components.label-picker.add_new"),icon_path:$}]},this._notFoundLabel=e=>this.hass.localize("ui.components.label-picker.no_match",{term:(0,o.qy)(g||(g=f`<b>‘${0}’</b>`),e)})}}(0,a.__decorate)([(0,s.MZ)({attribute:!1})],x.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)()],x.prototype,"label",void 0),(0,a.__decorate)([(0,s.MZ)()],x.prototype,"value",void 0),(0,a.__decorate)([(0,s.MZ)()],x.prototype,"helper",void 0),(0,a.__decorate)([(0,s.MZ)()],x.prototype,"placeholder",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"no-add"})],x.prototype,"noAdd",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"include-domains"})],x.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-domains"})],x.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"include-device-classes"})],x.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-label"})],x.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],x.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],x.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],x.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],x.prototype,"required",void 0),(0,a.__decorate)([(0,s.wk)()],x.prototype,"_labels",void 0),(0,a.__decorate)([(0,s.KN)({flatten:!0})],x.prototype,"_slotNodes",void 0),(0,a.__decorate)([(0,s.P)("ha-generic-picker")],x.prototype,"_picker",void 0),x=(0,a.__decorate)([(0,s.EM)("ha-label-picker")],x),t()}catch(_){t(_)}})},50176:function(e,t,i){i.a(e,async function(e,t){try{i(89463),i(74423),i(23792),i(26910),i(18111),i(22489),i(7588),i(61701),i(3362),i(42762),i(62953);var a=i(62826),o=i(96196),s=i(77845),l=i(4937),r=i(22786),n=i(78870),c=i(1087),d=i(52220),h=i(6262),p=i(54706),u=i(69569),_=(i(5745),i(13467),i(81789)),b=i(34127),v=e([_,b]);[_,b]=v.then?(await v)():v;let y,m,g,f,k,$=e=>e;const M="M3 16H10V14H3M18 14V10H16V14H12V16H16V20H18V16H22V14M14 6H3V8H14M14 10H3V12H14V10Z";class w extends((0,p.E)(o.WF)){async open(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.open())}async focus(){var e;await this.updateComplete,await(null===(e=this.labelPicker)||void 0===e?void 0:e.focus())}hassSubscribe(){return[(0,h.o5)(this.hass.connection,e=>{const t={};e.forEach(e=>{t[e.label_id]=e}),this._labels=t})]}render(){const e=this._sortedLabels(this.value,this._labels,this.hass.locale.language);return(0,o.qy)(y||(y=$` ${0} <ha-label-picker .hass="${0}" .helper="${0}" .disabled="${0}" .required="${0}" .placeholder="${0}" .excludeLabels="${0}" @value-changed="${0}"> <ha-chip-set> ${0} <ha-button id="picker" size="small" appearance="filled" @click="${0}" .disabled="${0}"> <ha-svg-icon .path="${0}" slot="start"></ha-svg-icon> ${0} </ha-button> </ha-chip-set> </ha-label-picker> `),this.label?(0,o.qy)(m||(m=$`<label>${0}</label>`),this.label):o.s6,this.hass,this.helper,this.disabled,this.required,this.placeholder,this.value,this._labelChanged,null!=e&&e.length?(0,l.u)(e,e=>null==e?void 0:e.label_id,e=>{var t;const i=null!=e&&e.color?(0,n.M)(e.color):void 0,a="label-"+e.label_id;return(0,o.qy)(g||(g=$` <ha-tooltip .for="${0}" .disabled="${0}"> ${0} </ha-tooltip> <ha-input-chip .item="${0}" .id="${0}" @remove="${0}" @click="${0}" .disabled="${0}" .label="${0}" selected="selected" style="${0}"> ${0} </ha-input-chip> `),a,!(null!=e&&null!==(t=e.description)&&void 0!==t&&t.trim()),null==e?void 0:e.description,e,a,this._removeItem,this._openDetail,this.disabled,null==e?void 0:e.name,i?`--color: ${i}`:"",null!=e&&e.icon?(0,o.qy)(f||(f=$`<ha-icon slot="icon" .icon="${0}"></ha-icon>`),e.icon):o.s6)}):o.s6,this._openPicker,this.disabled,M,this.hass.localize("ui.components.label-picker.add"))}get _value(){return this.value||[]}_removeItem(e){const t=e.currentTarget.item;this._setValue(this._value.filter(e=>e!==t.label_id))}_openDetail(e){const t=e.currentTarget.item;(0,u.f)(this,{entry:t,updateEntry:async e=>{await(0,h.Rp)(this.hass,t.label_id,e)}})}_labelChanged(e){e.stopPropagation();const t=e.detail.value;t&&!this._value.includes(t)&&(this._setValue([...this._value,t]),this.labelPicker.value="")}_setValue(e){this.value=e,setTimeout(()=>{(0,c.r)(this,"value-changed",{value:e}),(0,c.r)(this,"change")},0)}_openPicker(e){e.stopPropagation(),this.labelPicker.open()}constructor(...e){super(...e),this.noAdd=!1,this.disabled=!1,this.required=!1,this._sortedLabels=(0,r.A)((e,t,i)=>null==e?void 0:e.map(e=>null==t?void 0:t[e]).sort((e,t)=>(0,d.xL)((null==e?void 0:e.name)||"",(null==t?void 0:t.name)||"",i)))}}w.styles=(0,o.AH)(k||(k=$`ha-chip-set{margin-bottom:8px;background-color:var(--mdc-text-field-fill-color);border-bottom:1px solid var(--ha-color-border-neutral-normal);border-top-right-radius:var(--ha-border-radius-sm);border-top-left-radius:var(--ha-border-radius-sm);padding:var(--ha-space-3)}.placeholder{color:var(--mdc-text-field-label-ink-color);display:flex;align-items:center;height:var(--ha-space-8)}ha-input-chip{--md-input-chip-selected-container-color:var(--color, var(--grey-color));--ha-input-chip-selected-container-opacity:0.5;--md-input-chip-selected-outline-width:1px}label{display:block;margin:0 0 8px}`)),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],w.prototype,"hass",void 0),(0,a.__decorate)([(0,s.MZ)()],w.prototype,"label",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],w.prototype,"value",void 0),(0,a.__decorate)([(0,s.MZ)()],w.prototype,"helper",void 0),(0,a.__decorate)([(0,s.MZ)()],w.prototype,"placeholder",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean,attribute:"no-add"})],w.prototype,"noAdd",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"include-domains"})],w.prototype,"includeDomains",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-domains"})],w.prototype,"excludeDomains",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"include-device-classes"})],w.prototype,"includeDeviceClasses",void 0),(0,a.__decorate)([(0,s.MZ)({type:Array,attribute:"exclude-label"})],w.prototype,"excludeLabels",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],w.prototype,"deviceFilter",void 0),(0,a.__decorate)([(0,s.MZ)({attribute:!1})],w.prototype,"entityFilter",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],w.prototype,"disabled",void 0),(0,a.__decorate)([(0,s.MZ)({type:Boolean})],w.prototype,"required",void 0),(0,a.__decorate)([(0,s.wk)()],w.prototype,"_labels",void 0),(0,a.__decorate)([(0,s.P)("ha-label-picker",!0)],w.prototype,"labelPicker",void 0),w=(0,a.__decorate)([(0,s.EM)("ha-labels-picker")],w),t()}catch(y){t(y)}})},34127:function(e,t,i){i.a(e,async function(e,t){try{i(23792),i(62953);var a=i(62826),o=i(52630),s=i(96196),l=i(77845),r=e([o]);o=(r.then?(await r)():r)[0];let n,c=e=>e;class d extends o.A{static get styles(){return[o.A.styles,(0,s.AH)(n||(n=c`:host{--wa-tooltip-background-color:var(--secondary-background-color);--wa-tooltip-content-color:var(--primary-text-color);--wa-tooltip-font-family:var(
            --ha-tooltip-font-family,
            var(--ha-font-family-body)
          );--wa-tooltip-font-size:var(
            --ha-tooltip-font-size,
            var(--ha-font-size-s)
          );--wa-tooltip-font-weight:var(
            --ha-tooltip-font-weight,
            var(--ha-font-weight-normal)
          );--wa-tooltip-line-height:var(
            --ha-tooltip-line-height,
            var(--ha-line-height-condensed)
          );--wa-tooltip-padding:8px;--wa-tooltip-border-radius:var(
            --ha-tooltip-border-radius,
            var(--ha-border-radius-sm)
          );--wa-tooltip-arrow-size:var(--ha-tooltip-arrow-size, 8px);--wa-z-index-tooltip:var(--ha-tooltip-z-index, 1000)}`))]}constructor(...e){super(...e),this.showDelay=150,this.hideDelay=150}}(0,a.__decorate)([(0,l.MZ)({attribute:"show-delay",type:Number})],d.prototype,"showDelay",void 0),(0,a.__decorate)([(0,l.MZ)({attribute:"hide-delay",type:Number})],d.prototype,"hideDelay",void 0),d=(0,a.__decorate)([(0,l.EM)("ha-tooltip")],d),t()}catch(n){t(n)}})},6262:function(e,t,i){i.d(t,{IV:function(){return u},Rp:function(){return p},_9:function(){return h},o5:function(){return d}});i(89463),i(74423),i(23792),i(26910),i(18111),i(81148),i(22489),i(7588),i(61701),i(13579),i(17642),i(58004),i(33853),i(45876),i(32475),i(15024),i(31698),i(62953);var a=i(70570),o=i(71727),s=i(52220),l=i(9899),r=i(80730);const n=e=>e.sendMessagePromise({type:"config/label_registry/list"}).then(e=>e.sort((e,t)=>(0,s.xL)(e.name,t.name))),c=(e,t)=>e.subscribeEvents((0,l.s)(()=>n(e).then(e=>t.setState(e,!0)),500,!0),"label_registry_updated"),d=(e,t)=>(0,a.N)("_labelRegistry",n,c,e,t),h=(e,t)=>e.callWS(Object.assign({type:"config/label_registry/create"},t)),p=(e,t,i)=>e.callWS(Object.assign({type:"config/label_registry/update",label_id:t},i)),u=(e,t,i,a,s,l,n,c,d,h,p,u="")=>{if(!s||0===s.length)return[];const _=Object.values(i),b=Object.values(a);let v,y,m={};(l||n||c||d||h)&&(m=(0,r.g2)(b),v=_,y=b.filter(e=>e.labels.length>0),l&&(v=v.filter(e=>{const t=m[e.id];return!(!t||!t.length)&&m[e.id].some(e=>l.includes((0,o.m)(e.entity_id)))}),y=y.filter(e=>l.includes((0,o.m)(e.entity_id)))),n&&(v=v.filter(e=>{const t=m[e.id];return!t||!t.length||b.every(e=>!n.includes((0,o.m)(e.entity_id)))}),y=y.filter(e=>!n.includes((0,o.m)(e.entity_id)))),c&&(v=v.filter(t=>{const i=m[t.id];return!(!i||!i.length)&&m[t.id].some(t=>{const i=e[t.entity_id];return!!i&&(i.attributes.device_class&&c.includes(i.attributes.device_class))})}),y=y.filter(t=>{const i=e[t.entity_id];return i&&i.attributes.device_class&&c.includes(i.attributes.device_class)})),d&&(v=v.filter(e=>d(e))),h&&(v=v.filter(t=>{const i=m[t.id];return!(!i||!i.length)&&m[t.id].some(t=>{const i=e[t.entity_id];return!!i&&h(i)})}),y=y.filter(t=>{const i=e[t.entity_id];return!!i&&h(i)})));let g=s;const f=new Set;let k;v&&(k=v.filter(e=>e.area_id).map(e=>e.area_id),v.forEach(e=>{e.labels.forEach(e=>f.add(e))})),y&&(k=(null!=k?k:[]).concat(y.filter(e=>e.area_id).map(e=>e.area_id)),y.forEach(e=>{e.labels.forEach(e=>f.add(e))})),k&&k.forEach(e=>{const i=t[e];null==i||i.labels.forEach(e=>f.add(e))}),p&&(g=g.filter(e=>!p.includes(e.label_id))),(v||y)&&(g=g.filter(e=>f.has(e.label_id)));return g.map(e=>{var t;return{id:`${u}${e.label_id}`,primary:e.name,secondary:null!==(t=e.description)&&void 0!==t?t:"",icon:e.icon||void 0,icon_path:e.icon?void 0:"M17.63,5.84C17.27,5.33 16.67,5 16,5H5A2,2 0 0,0 3,7V17A2,2 0 0,0 5,19H16C16.67,19 17.27,18.66 17.63,18.15L22,12L17.63,5.84Z",sorting_label:e.name,search_labels:[e.name,e.label_id,e.description].filter(e=>Boolean(e))}})}},54706:function(e,t,i){i.d(t,{E:function(){return s}});i(74423),i(23792),i(18111),i(13579),i(3362),i(62953);var a=i(62826),o=i(77845);const s=e=>{class t extends e{connectedCallback(){super.connectedCallback(),this._checkSubscribed()}disconnectedCallback(){if(super.disconnectedCallback(),this.__unsubs){for(;this.__unsubs.length;){const e=this.__unsubs.pop();e instanceof Promise?e.then(e=>e()):e()}this.__unsubs=void 0}}updated(e){if(super.updated(e),e.has("hass"))this._checkSubscribed();else if(this.hassSubscribeRequiredHostProps)for(const t of e.keys())if(this.hassSubscribeRequiredHostProps.includes(t))return void this._checkSubscribed()}hassSubscribe(){return[]}_checkSubscribed(){var e;void 0!==this.__unsubs||!this.isConnected||void 0===this.hass||null!==(e=this.hassSubscribeRequiredHostProps)&&void 0!==e&&e.some(e=>void 0===this[e])||(this.__unsubs=this.hassSubscribe())}}return(0,a.__decorate)([(0,o.MZ)({attribute:!1})],t.prototype,"hass",void 0),t}},69569:function(e,t,i){i.d(t,{f:function(){return s}});i(23792),i(3362),i(62953);var a=i(1087);const o=()=>Promise.all([i.e("3577"),i.e("3785"),i.e("9998"),i.e("5496")]).then(i.bind(i,427)),s=(e,t)=>{(0,a.r)(e,"show-dialog",{dialogTag:"dialog-label-detail",dialogImport:o,dialogParams:t})}}}]);
//# sourceMappingURL=6201.162f331fc1c6f3af.js.map